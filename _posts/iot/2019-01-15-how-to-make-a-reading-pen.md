---
layout:		post
category:	"iot"
title:		"如何使用手机实现一个简易的“点读笔”"
tags:		[iot]
---
- Content
{:toc}
# 前言

​	孩子快九个月了，为了让他认识点东西，家里买了点读的读物，大人可以点着教他，不用自己念了，这样也解决了大人发音不标准或者无法教英文的情况，小孩子自己也慢慢会拿着自己点感兴趣的地方，给大人也省下了时间，这个点读的读物真是很方便。

​	刚好前阵子自己调研了一些关于物联网的相关知识，了解到了NFC标签，感觉这个实现一个类似的功能，想着把整个过程模拟实现一下，于是做了一个简单的实验。因为本人并不是相关专业人士，硬件知识了解有限，因此使用了废弃的手机作为“点读笔”。仅仅为了学习研究，实际的使用体验还是差得多呢。



# 标签选择

直接在某宝上选的，跳的最薄最便宜的款，链接如下：[NFC电子标签 M1芯片RFID电子标签 14443A协议标签复旦IC不干胶](https://item.taobao.com/item.htm?id=574789658067)

该款标签有个好处是已经有预设的ID了，因此后面直接读取使用即可。

标签的一些说明，这里贴一下，方便参考：

```
标签简况    

1. 天线材料铝
2. 基材材料PET
3. 天线厚度0.03mm
4. 基材厚度0.03mm
5. 感应频率14.0+/-0.5MHz
6. 读写距离0-10CM

 

芯片参数    

1. 符合ISO14443A标准
2. 芯片可选：S50/S70/UL/FM1108/Desfire/NTAG203等
3. 工作频率：13.56MHz
4. 谐振频率：14.0MHz+/-0.5MHz
5. 典型激活场强（读）：94dBuA/m#
6. 典型激活场强（写）：97dBuA/m#
7. 可擦写次数：10万次
8. 数据保存时间：10年
9. 通讯速率：106 K bits/s

 

应用场合    

1.不干胶电子标签广泛应用于货物供应管理、包裹和邮政服务，物流仓储管理系统、图书馆和出租服务、航空行李箱标签、产品证明、品牌防伪保护、通常的识别系统、压容器标签等非金属物品物流贴纸。
```

![](https://gd4.alicdn.com/imgextra/i1/2663782869/TB2dnM_mlsmBKNjSZFFXXcT9VXa_!!2663782869.jpg)

![](https://gd4.alicdn.com/imgextra/i4/2663782869/O1CN01YRQ4My1X42o01EiKj_!!2663782869.jpg)




# 标签ID读取
好在购买的这些NFC标签并不是白标，里面是有ID的，而且不一样，因此直接读取使用即可。在GitHub上找了使用Android读取NFC标签的代码，参考：

- [xujinyang/NFC\-ALL: an NFC app show how to use NFC in Android](https://github.com/xujinyang/NFC-ALL)
- [当前应用拦截NFC响应，不弹出选择框教程](https://blog.csdn.net/mobilexu/article/details/41862403)
- [万能模拟器：MI 小米 小米手环3 NFC功能探索](https://www.toutiao.com/a6615090384794026500/?tt_from=weixin&utm_campaign=client_share&wxshare_count=1&timestamp=1547262426&app=news_article&utm_source=weixin&iid=57123746622&utm_medium=toutiao_android&group_id=6615090384794026500)
- [调用TextToSpeech朗读的时候如何中间停顿](https://blog.csdn.net/iteye_3854/article/details/82300068)



后面可以直接在后端部署下，根据ID来查询出文本信息，让App发音读出来即可。



# 后台配置

直接使用了GitHub的仓库作为后端部署，上传一个xml文件，内容如下：

```xml
<?xml version="1.0"?>
<root>
	<item id="49611F2E" cn="小猫" en="喵.. 喵.. 喵.. 小猫钓鱼... 有一天，猫妈妈带着小猫到河边鱼竿去捉蜻蜓。蜻蜓飞走了，小猫空手回到河边。一看，妈妈已经钓到了一条大鱼。小猫想：我也要钓一条大鱼，就又拿起鱼竿钓鱼。不一会儿，一只蝴蝶飞来了，这只蝴蝶可真漂亮呀，小猫越看越喜欢，于是放下鱼竿，又去捉蝴蝶。蝴蝶没捉到，小猫又空着手回到河边。一看，妈妈又钓了一条大鱼。小猫对妈妈说：“我怎么就钓不到鱼呢！”妈妈说：“钓鱼要一心一意，你一会儿捉蜻蜓，一会儿捉蝴蝶，当然钓不到鱼了。”小猫听了妈妈的话，一心一意地钓鱼，终于钓到了一条大鱼" />
	<item id="B9DE202E" cn="老虎" en="tiger.. tiger" />
	<item id="F9651F2E" cn="猴子" en="monkey.. monkey" />
	<item id="F9E7202E" cn="苹果" en="Apple.. Apple" />
	<item id="09691F2E" cn="香蕉" en="banana.. banana" />
	<item id="D9641F2E" cn="汪汪狗" en="汪.. 汪.. 汪" />
	<item id="99D3202E" cn="小鸡" en="叽.. 叽.. 叽" />
	<item id="49D6202E" cn="小白兔" en="rabbit.. rabbit" />
</root>
```

里面的id其实就是预先把NFC标签的ID，这个可以随时读取出来，然后配置上中英文内容，接下来就是语言合成环节了，让手机App能够根据文字发音读出来。



# TTS语音合成
这里使用了手机预置的TTS功能来实验语音合成，手机里一般有一个预置的语音合成引擎，当然还可以下载安装三方的语音合成引擎，这里为了提高语音合成效果，安装了科大讯飞的语音合成引擎。

- 讯飞语音引擎3.0.apk（3.0_1.0.10051），安装后在系统设置无障碍里开启TTS并选择讯飞的语音引擎。
- 科大讯飞语音引擎+jar包+demo
- [科大讯飞语音合成引擎3\.0\+demo\-CSDN下载](https://download.csdn.net/download/nuyunhai/10732492)





# 部署使用

- 把NFC标签贴到对应的实物上
- GitHub上的xml配置文件配置好对应的内容
- 手机App打开后先联网获取一次xml配置，其实就是把GitHub上编辑的xml下载到手机本地，然后加载使用
- 把手机靠近NFC标签，App便会自动朗读对应的内容了
- 支持可扩展：就是不断完善xml配置即可



# 改进

- 手机的个头太大，拿起来不方便，如果有mini版的手机或者硬件载体会更好
- NFC标签可以再小再隐蔽一些，虽然采购的这款已经很薄了，但是想要夹在书中还是需要一些工艺的，做到完全隐蔽
- App的使用体验

